generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int        @id @default(autoincrement())
  createdAt DateTime   @default(now())
  name      String     @unique
  feedback  Feedback[]
  metrics   Metric[]
}

model Feedback {
  id           Int      @id @default(autoincrement())
  createdAt    DateTime @default(now())
  user         User     @relation(fields: [userId], references: [id])
  userId       Int
  promptId     Int
  essay        String
  feedback     String?
  rawRequest   Json
  rawResponse  Json?
  helpful      Boolean?
  under        Int?
  strweak      Int?
  specific     Int?
  improve      Int?
  confident    Int?
  practice     Int?
  well         Int?
  futimprove   Int?
  clear        Int?
  Overall      Int?
}

model Metric {
  id             Int      @id @default(autoincrement())
  createdAt      DateTime @default(now())
  user           User     @relation(fields: [userId], references: [id])
  userId         Int
  essayText      String
  essayContents  Json
  essayLength    Int
  essayWordCount Int
  essayDeltas    Json
  clientTime     DateTime
}
